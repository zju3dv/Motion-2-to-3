# definition of lightning datamodule (dataset + dataloader)
_target_: hmr4d.datamodule.general_datamodule_v2.GeneralDataModule
name: HumanML3D_2dmotionmv_ortho_nr

dataset_opts:
  root: "inputs/hml3d/joints3d.pth"
  is_ignore_transl: True
  is_root_next: True
  required_text: null
  anti_text: null
  is_uniform_views: True
  N_views: 4
  is_cam_rel2human: False
  is_pinhole: False
  train_fps: 30
  distance: 4.5
  max_angle: 180
  eleva_angle: 5
  is_notext: False
  train:
    # HumanML3D
    - _target_: hmr4d.dataset.HumanML3D.motion2d.MVCamDataset
      split: "train_val"
      root: ${data.dataset_opts.root}
      is_ignore_transl: ${data.dataset_opts.is_ignore_transl}
      is_root_next: ${data.dataset_opts.is_root_next}
      is_pinhole: ${data.dataset_opts.is_pinhole}
      train_fps: ${data.dataset_opts.train_fps}
      distance: ${data.dataset_opts.distance}
      max_angle: ${data.dataset_opts.max_angle}
      eleva_angle: ${data.dataset_opts.eleva_angle}
      is_notext: ${data.dataset_opts.is_notext}
      required_text: ${data.dataset_opts.required_text}
      anti_text: ${data.dataset_opts.anti_text}
      is_uniform_views: ${data.dataset_opts.is_uniform_views}
      N_views: ${data.dataset_opts.N_views}
      is_cam_rel2human: ${data.dataset_opts.is_cam_rel2human}
      limit_size: null
  val:
    # HumanML3D
    - _target_: hmr4d.dataset.HumanML3D.motion2d.MVCamDataset
      split: "test"
      root: ${data.dataset_opts.root}
      is_ignore_transl: ${data.dataset_opts.is_ignore_transl}
      is_root_next: ${data.dataset_opts.is_root_next}
      is_pinhole: ${data.dataset_opts.is_pinhole}
      train_fps: ${data.dataset_opts.train_fps}
      distance: ${data.dataset_opts.distance}
      is_notext: ${data.dataset_opts.is_notext}
      required_text: ${data.dataset_opts.required_text}
      anti_text: ${data.dataset_opts.anti_text}
      is_uniform_views: ${data.dataset_opts.is_uniform_views}
      N_views: ${data.dataset_opts.N_views}
      is_cam_rel2human: ${data.dataset_opts.is_cam_rel2human}
      max_angle: ${data.dataset_opts.max_angle}
      eleva_angle: ${data.dataset_opts.eleva_angle}
      limit_size: null

loader_opts:
  train:
    batch_size: 32 # on one gpu
    num_workers: 4
  val:
    batch_size: 1
    num_workers: 1
